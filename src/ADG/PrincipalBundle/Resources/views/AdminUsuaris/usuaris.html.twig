{% extends '::base.html.twig' %}

{% block stylesheets %}

   		<link href="{{ asset('bundles/adg/css/dataTables.bootstrap.css') }}" rel="stylesheet"> 
{% endblock %}

{% block javascripts %} 
	
    <script>   
	$(document).ready(function() {
		$('#usuaris_table').dataTable({
				"aaSorting": [[ 0, "desc" ]],
                "sDom": "<'col-xs-4'l> <'col-xs-offset-1'f> rt <'col-xs-4'i><'col-xs-offset-1'p>",
                "language": {
        			"sLengthMenu": "_MENU_ entrades per pàgina",
        			"sZeroRecords": "No s'ha trobat res",
        			"sInfo": "Trobades _TOTAL_ entrades",
        			"sInfoEmpty": "0 entrades trobades",
        			"sInfoFiltered": "(filtrades desde _MAX_ entrades totals)",
        			"oPaginate": {
        		        "sNext": "Següent",
        		        "sPrevious": "Anterior"
        		      },
        			"sSearch": "Cerca general: "
                }
        })
	} );
		</script>

    <script src="{{ asset('bundles/ADG/js/jquery.dataTables.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/ADG/js/dataTables.bootstrap.js') }}" type="text/javascript"></script>
{% endblock %}

{% block title %}Usuaris{% endblock %}

{% block body %}
	<div class="page-header"><h1>Usuaris</h1></div>
	
{# Crear #}
<div class="row" style="margin-left:0px">	
	<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 well">
    	<h4>Afegir nou usuari</h4> 
        <div class="form-group"> 
            <a data-toggle="modal" data-target="#crearUsuari" href="{{ path("usuaris_crear") }}" class="btn btn-success"><i class="icon-plus"></i>&nbsp;Afegir</a>
        </div>
	</div>
	
	{% for flashMessage in app.session.flashbag.get('success') %}
	<div class="col-xs-9 col-sm-4 col-lg-4 col-lg-offset-2">
	    <div class="alert alert-success alert-dismissable">
	    	<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
	        <strong>{{ flashMessage }}</strong>
	    </div>
	</div>
	{% endfor %}
	
</div>


{# Taula #}
<div class="row">
	<div class="col-lg-12 col-md-12 col-sm-12 table-responsive">
		{# Taula #}
		<table class="table table-striped table-bordered table-hover" id="usuaris_table">
        <thead>
            <tr>
                <th class="centered-text" id="idHeader" title="Tooltip!">Nom d'usuari</th>
                <th class="centered-text">Email</th>
                <th class="centered-text">Contrasenya</th>
                {% if is_granted('ROLE_ADMIN') %}
			    	<th class="centered-text">Operacions</th>            
           	   	{% endif %}
            </tr>
        </thead>
            <tbody>
                {% for usuari in usuaris %}
                    <tr>
                        <td>{{ usuari.username }}</td>
                        <td>{{ usuari.email }}</td>
                        <td>****</td>
                        <td>
                        	<a data-toggle="modal" href="{{ path("usuaris_editar", { 'id': usuari.id }) }}" data-target="#editarUsuari" class="btn btn-xs btn-primary" type="button"><i class="icon-pencil"></i></a>
                        	<a data-toggle="modal" href="{{ path("usuaris_eliminar", { 'id': usuari.id }) }}" data-target="#eliminarUsuari" class="btn btn-xs btn-danger" type="button"><i class="icon-remove"></i></a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

	</div>
</div>

{# Modals #}
<div class="modal" id="crearUsuari" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
</div><!-- /.modal -->

<div class="modal" id="editarUsuari" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
</div><!-- /.modal -->

<div class="modal" id="eliminarUsuari" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
</div><!-- /.modal -->
{% endblock %}


	